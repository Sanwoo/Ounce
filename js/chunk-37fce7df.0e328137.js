(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37fce7df"],{3590:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("li",{staticClass:"song-list-item",on:{click:function(n){return t.toMainPage("/home/songdetail",t.id)}}},[t.cover?e("img",{directives:[{name:"img-lazyload",rawName:"v-img-lazyload"}],attrs:{src:t.cover+t.squareImgSize,alt:""}}):t._e(),e("div",[e("span",{staticClass:"text-truncate"},[t._v(t._s(t.title))]),e("p",{staticClass:"text-truncate"},[t._t("default")],2)])])},i=[],s=(e("a9e3"),{name:"songlistitem",props:{cover:String,title:String,id:Number}}),r=s,o=(e("cc4c"),e("2877")),c=Object(o["a"])(r,a,i,!1,null,"3a3eb454",null);n["a"]=c.exports},"49df":function(t,n,e){"use strict";var a=e("73f9"),i=e.n(a);i.a},"575b":function(t,n,e){},"68e2":function(t,n,e){},"73f9":function(t,n,e){},"7db0":function(t,n,e){"use strict";var a=e("23e7"),i=e("b727").find,s=e("44d2"),r=e("ae40"),o="find",c=!0,l=r(o);o in[]&&Array(1)[o]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!l},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},a397c:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"trend-item",on:{click:function(n){return t.toMain(t.info)}}},[e("div",{staticClass:"_title"},[t.info.user.avatarUrl?e("img",{attrs:{src:t.info.user.avatarUrl+t.squareImgSize,alt:""},on:{click:function(n){return n.stopPropagation(),t.toUser(t.info.user.userId)}}}):t._e(),e("div",[e("p",[e("a",{on:{click:function(n){return n.stopPropagation(),t.toUser(t.info.user.userId)}}},[t._v(t._s(t.info.user.nickname))]),t._v(" "+t._s(t.anneType)+" ")]),e("span",[t._v(t._s(t._f("dateFormat")(t.info.eventTime)))])])]),e("div",{staticClass:"contain"},[e("pre",{staticClass:"_msg",domProps:{innerHTML:t._s(t.info.pjson.msg)}}),t.annexPics.length>0?e("div",{staticClass:"_cover"},t._l(t.annexPics,(function(n,a){return e("div",{key:a,class:[t.annexPics.length>1?"_cover-item":"_cover-one"]},[e("img",{attrs:{src:n.originUrl,alt:""}})])})),0):t._e(),t.annexList?e("div",{staticClass:"_list",on:{click:function(n){return n.stopPropagation(),t.toMainPage("/home/songdetail",t.annexList.id)}}},[e("img",{attrs:{src:t.annexList.coverImgUrl+t.squareImgSize,alt:""}}),e("div",[e("p",[t._v(t._s(t.annexList.name))]),e("span",[t._v("by "+t._s(t.annexList.creator.nickname))])])]):t._e(),t.annexSong?e("div",{staticClass:"_song",on:{click:function(n){return n.stopPropagation(),t.playMusic(t.annexSong.id)}}},[e("span",[e("img",{attrs:{src:t.annexSongCover+t.squareImgSize,alt:""}}),e("i",{staticClass:"van-icon van-icon-play"})]),e("div",[e("p",{staticClass:"text-truncate"},[t._v(t._s(t.annexSong.name))]),e("span",[t._v(t._s(t.annexSong.artists[0].name))])])]):t._e(),t.annexEvent?e("div",{staticClass:"_event",on:{click:function(n){return n.stopPropagation(),t.toMain(t.annexEvent)}}},[e("div",{staticClass:"_event-msg"},[e("a",{on:{click:function(n){return n.stopPropagation(),t.toUser(t.annexEvent.user.userId)}}},[t._v("@"+t._s(t.annexEvent.user.nickname)+":")]),e("pre",{staticClass:"_msg",style:{textIndent:t.annexEventMsgIndent}},[t._v(t._s(t.annexEvent.pjson.msg))])]),t.annexEventPics.length>0?e("div",{staticClass:"_event-cover _cover"},t._l(t.annexEventPics,(function(n,a){return e("div",{key:a,class:[t.annexEventPics.length>1?"_cover-item":"_cover-one"]},[e("img",{attrs:{src:n.originUrl,alt:""}})])})),0):t._e(),t.annexEventList?e("div",{staticClass:"_event-list _list",on:{click:function(n){return n.stopPropagation(),t.toMainPage("/home/songdetail",t.annexEventList.id)}}},[e("img",{attrs:{src:t.annexEventList.coverImgUrl+t.squareImgSize,alt:""}}),e("div",[e("p",[t._v(t._s(t.annexEventList.name))]),e("span",[t._v("by "+t._s(t.annexEventList.creator.nickname))])])]):t._e(),t.annexEventSong?e("div",{staticClass:"_event-song _song",on:{click:function(n){return n.stopPropagation(),t.playMusic(t.annexEventSong.id)}}},[e("span",[e("img",{attrs:{src:t.annexEventSongCover+t.squareImgSize,alt:""}}),e("i",{staticClass:"van-icon van-icon-play"})]),e("div",[e("p",{staticClass:"text-truncate"},[t._v(t._s(t.annexEventSong.name))]),e("span",[t._v(t._s(t.annexEventSong.artists[0].name))])])]):t._e()]):t._e(),t.tool?e("ul",{staticClass:"_tools"},t._l(t.tools,(function(n,a){return e("li",{key:a},[e("i",{staticClass:"van-icon",class:n.icon}),t._v(" "+t._s(n.text)+" ")])})),0):t._e()])])},i=[],s=(e("99af"),e("d81d"),{name:"trenditem",props:{info:Object,tool:{type:Boolean,default:!0}},data:function(){return{tools:[{icon:"van-icon-exchange",text:"转发"},{icon:"van-icon-chat-o",text:"评论"},{icon:"van-icon-good-job-o",text:"赞"}]}},computed:{annexList:function(){return this.info.pjson.playlist},annexSong:function(){return this.info.pjson.song},annexPics:function(){return this.info.pics},annexSongCover:function(){if(!this.annexSong)return!1;var t=this.annexSong.album;return t.picUrl||t.img80x80},annexEvent:function(){var t=this.info.pjson.event;return"undefined"!==typeof t&&(t.pjson=JSON.parse(t.json),t)},annexEventPics:function(){return!!this.annexEvent&&this.annexEvent.pics},annexEventList:function(){return!!this.annexEvent&&this.annexEvent.pjson.playlist},annexEventSong:function(){return!!this.annexEvent&&this.annexEvent.pjson.song},annexEventSongCover:function(){if(!this.annexEventSong)return!1;var t=this.annexEventSong.album;return t.picUrl||t.img80x80},annexEventMsgIndent:function(){return!!this.annexEvent&&"".concat(14*(this.annexEvent.user.nickname.length+1)+7,"px")},anneType:function(){var t=this.annexList,n=this.annexSong,e=this.annexPics,a=this.annexEvent,i="";return t?i="分享歌单：":n?i="分享歌曲：":a?i="转发：":e.length>0&&(i="发布Mlog："),i}},filters:{dateFormat:function(t){var n=new Date(t),e=n.getFullYear(),a=(new Date).getFullYear(),i=a-e>=1?e+"年":"";return"".concat(i).concat(n.getMonth()+1,"月").concat(n.getDate(),"日")}},mounted:function(){this.dataInit(this.info)},methods:{dataInit:function(t){var n=["shareCount","commentCount","likedCount"];this.tools=this.tools.map((function(e,a){var i=t.info[n[a]];return i>0&&(e.text=i),e}))},playMusic:function(t){var n=this,e={info:{alg:null,id:t,v:null},obj:{list:[],id:null,index:0}};this.$store.dispatch("newMusic",e).then((function(t){n.$bus.emit("playerOpen")}))},toMain:function(t){var n=this.$route.query.id;this.$router.push({path:"/home/userdetail/trenddetail",query:{detail:t,id:n}})},toUser:function(t){this.toMainPage("/home/userdetail",t)}}}),r=s,o=(e("49df"),e("2877")),c=Object(o["a"])(r,a,i,!1,null,"b71745a8",null);n["a"]=c.exports},a87e:function(t,n,e){"use strict";var a=e("dcd3"),i=e.n(a);i.a},cc04:function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"user-detail"},[e("BreakHeader",{staticClass:"_header",attrs:{fixed:""}},[e("transition",{attrs:{"enter-active-class":"slideInUp","leave-active-class":"slideOutUp"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.flags.userinfo,expression:"flags.userinfo"}],staticClass:"_header-tool"},[e("div",{staticClass:"_header-tool-info"},[e("b",[t._v(t._s(t.detail.nickname))]),t.isLogged?t._e():e("p",[t._v(t._s(t.detail.followeds)+" 粉丝")])]),t.isLogged?t._e():e("span",[t._v("+ 关注")])])])],1),t.flags.load?e("div",{staticClass:"user-detail-cover active"},[e("img",{attrs:{src:t.detail.backgroundUrl+"?param=700y700",alt:""}}),e("transition",{attrs:{"enter-active-class":"slideInDown","leave-active-class":"slideOutUp"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.flags.userinfo,expression:"!flags.userinfo"}],staticClass:"_info"},[e("img",{attrs:{src:t.detail.avatarUrl+t.squareImgSize,alt:""}}),e("p",[t._v(t._s(t.detail.nickname))]),e("div",{staticClass:"_info-tips"},[e("div",[e("span",[t._v("关注 "+t._s(t.detail.follows))]),e("span",[t._v("粉丝 "+t._s(t.detail.followeds))]),e("ul",[e("li",[t._v(t._s(t.ageRank))]),e("li",[e("i",[t._v("Lv."+t._s(t.info.level))])])])]),t.isLogged?e("ul",[e("li",{on:{click:function(n){return t.toMainPage("/home/userdetail/userinfo",t.userId)}}},[t._v(" 编辑 ")]),e("li",[t._v("更换背景")])]):e("ul",[e("li",[t._v("+ 关注")]),e("li",[t._v("发私信")])])])])])],1):t._e(),t.flags.load?e("van-tabs",{staticClass:"user-detail-contain",attrs:{swipeable:"",animated:"",background:"rgba(0,0,0,0)",sticky:"","offset-top":48},on:{scroll:t.scrollHandler},model:{value:t.nav.active,callback:function(n){t.$set(t.nav,"active",n)},expression:"nav.active"}},[e("van-tab",{attrs:{title:t.nav.list[0].text}},[e("UdHome",{attrs:{userinfo:t.detail}})],1),e("van-tab",{attrs:{title:t.nav.list[1].text}},[e("UdTrend")],1)],1):t._e(),e("transition",{attrs:{"enter-active-class":"child-route-in","leave-active-class":"child-route-out"}},[e("router-view")],1)],1)},i=[],s=(e("fb6a"),e("d3b7"),e("5377"),e("25f0"),e("c24f")),r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"user-detail-home"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.flags.load,expression:"!flags.load"}]},[e("div",{staticClass:"_banner"},[t.flags.load?e("div",[e("i",{staticClass:"van-icon van-icon-like"}),e("div",[e("span",[t._v("喜欢的音乐")]),e("p",[t._v(t._s(t.loveList.trackCount)+"首，播放"+t._s(t.loveList.playCount)+"次")])])]):t._e()]),t.createdList.length>0?e("div",{staticClass:"_title"},[e("p",[e("b",[t._v("创建的歌单")]),t._v(" （"+t._s(t.createdList.length)+"个，被收藏"+t._s(t.userinfo.playlistBeSubscribedCount)+"次） ")]),e("span",{on:{click:function(n){return t.toMainPage("/home/userdetail/usersonglist",t.userId)}}},[t._v("更多歌单")])]):t._e(),e("ul",{staticClass:"_contain"},t._l(t.curCreatedList,(function(n){return e("SonglistItem",{key:n.id,attrs:{cover:n.coverImgUrl,title:n.name,id:n.id}},[t._v(t._s(n.trackCount)+"首，播放"+t._s(t._f("numFormat")(n.playCount))+"次")])})),1),t.curFavList.length>0?e("div",{staticClass:"_title"},[e("p",[e("b",[t._v("收藏的歌单")]),t._v(" （"+t._s(t.favList.length)+"） ")])]):t._e(),e("ul",{staticClass:"_contain"},t._l(t.curFavList,(function(n){return e("SonglistItem",{key:n.id,attrs:{cover:n.coverImgUrl,title:n.name,id:n.id}},[t._v(t._s(n.trackCount)+"首，by"+t._s(n.creator.nickname)+"，播放"+t._s(t._f("numFormat")(n.playCount))+"次")])})),1),t._m(0),e("ul",{staticClass:"_contain"},[e("li",{staticClass:"_contain-text"},[t._v(" 村龄："+t._s(t.townAge)+"年（"+t._s(t._f("dateFormat")(t.userinfo.createTime))+"注册） ")]),t.ageRank?e("li",{staticClass:"_contain-text"},[t._v(" 年龄："+t._s(t.ageRank)+" "+t._s(t.constellation)+" ")]):t._e(),e("li",{staticClass:"_contain-text"},[t._v("地区： "+t._s(t.residencePlace))])])])])},o=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"_title"},[e("p",[e("b",[t._v("基本信息")])]),e("span",[t._v("更多信息")])])}],c=(e("99af"),e("4de4"),e("7db0"),e("a9e3"),e("4d90"),[{date:[312,419],text:"白羊座"},{date:[420,520],text:"金牛座"},{date:[622,722],text:"巨蟹座"},{date:[723,822],text:"狮子座"},{date:[823,922],text:"处女座"},{date:[923,1023],text:"天秤座"},{date:[1024,1122],text:"天蝎座"},{date:[1123,1221],text:"射手座"},{date:[1222,119],text:"摩羯座"},{date:[120,218],text:"水瓶座"},{date:[219,320],text:"双鱼座"}]),l=e("494e"),u=e("3590"),d={name:"userdetailhome",components:{SonglistItem:u["a"]},props:{userinfo:Object},data:function(){return{list:[],userId:0,flags:{load:!1}}},computed:{favList:function(){var t=this.list,n=this.userId;return t.filter((function(t){return t.creator.userId!=n}))},loveList:function(){return this.list[0]},createdList:function(){var t=this.list,n=this.userId;return t.filter((function(t){return t.creator.userId==n}))},curFavList:function(){return"undefined"!==typeof this.favList?this.favList.slice(0,3):[]},curCreatedList:function(){return"undefined"!==typeof this.createdList?this.createdList.slice(1,5):[]},townAge:function(){var t=this.userinfo.createTime;return(new Date).getFullYear()-new Date(t).getFullYear()},ageRank:function(){var t=this.userinfo.birthday;return"-"!==t.toString()[0]&&new Date(t).getFullYear().toString().slice(-2)+"后"},constellation:function(){var t=this.userinfo.birthday;if("-"===t.toString()[0])return!1;var n=new Date(t),e=Number("".concat(n.getMonth()+1).concat(n.getDate().toString().padStart(2,0)));return c.find((function(t){var n=t.date,a=n[0]>n[1];return a?n[1]<=e&&e<=n[0]:n[0]<=e&&e<=n[1]})).text||"未知"},residencePlace:function(){var t=l["a"].province_list,n=l["a"].city_list,e=this.userinfo,a=e.province,i=e.city,s=t[a]||"未知",r=n[i]||"未知";return s+" "+r}},filters:{dateFormat:function(t){var n=new Date(t);return"".concat(n.getFullYear(),"年").concat(n.getMonth()+1,"月")}},mounted:function(){this.mainRequest()},methods:{mainRequest:function(){var t=this;this.userId=this.$route.query.id,Object(s["o"])(this.userId).then((function(n){t.list=n.data.playlist,t.flags.load=!0}))}}},v=d,f=(e("dac8"),e("2877")),g=Object(f["a"])(v,r,o,!1,null,"cc4a7c76",null),_=g.exports,m=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"user-detail-trend"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.flags.load,expression:"!flags.load"}]},[0===t.trends.length?e("div",{staticClass:"_blank"},[t._v(" 可可爱爱，没有动态 O(∩_∩)O ~ ")]):e("BotLoad",{attrs:{data:t.trends,perpage:3,target:".user-detail",isbind:t.isActive},scopedSlots:t._u([{key:"contain",fn:function(n){var a=n.curdata;return t._l(a,(function(t){return e("TrendItem",{key:t.id,attrs:{info:t}})}))}}])})],1)])},p=[],h=(e("d81d"),e("5530")),x=e("a397c"),C={name:"userdetailtrend",components:{TrendItem:x["a"]},inject:["nav"],data:function(){return{trends:[],userId:0,navKey:1,flags:{load:!1}}},computed:{isActive:function(){return this.nav.active===this.navKey}},mounted:function(){this.mainRequest()},methods:{mainRequest:function(){var t=this;this.userId=this.$route.query.id,Object(s["k"])(this.userId).then((function(n){t.trends=n.data.events.map((function(t){return Object(h["a"])(Object(h["a"])({},t),{},{pjson:JSON.parse(t.json)})})),t.flags.load=!0}))}}},b=C,y=(e("dae7"),Object(f["a"])(b,m,p,!1,null,"f1967ad2",null)),k=y.exports,E={name:"userdetail",components:{UdHome:_,UdTrend:k},inject:["user"],provide:function(){return{nav:this.nav}},data:function(){return{nav:{list:[{text:"主页",comp:"UdHome"},{text:"动态",comp:"UdTrend"}],active:0},detail:{},info:{},flags:{contain:!1,load:!1,cover:!1,userinfo:!1},userId:0}},computed:{ageRank:function(){var t=this.detail.birthday;return new Date(t).getFullYear().toString().slice(-2)+"后"},isLogged:function(){var t=this.user,n=t.flag,e=t.userid;return n&&e==this.$route.query.id},routeId:function(){return this.$route.query.id}},watch:{routeId:{immediate:!0,handler:function(t){"undefined"!==typeof t&&this.mainRequset(t)}}},methods:{mainRequset:function(t){var n=this;this.userId=t,this.flags.load=!1,Object(s["j"])(t).then((function(t){n.detail=t.data.profile,n.info=t.data,n.flags.load=!0}))},scrollHandler:function(t){this.flags.userinfo!=t.isFixed&&(this.flags.userinfo=t.isFixed)}}},I=E,S=(e("a87e"),Object(f["a"])(I,a,i,!1,null,"09f5b596",null));n["default"]=S.exports},cc4c:function(t,n,e){"use strict";var a=e("ed17"),i=e.n(a);i.a},dac8:function(t,n,e){"use strict";var a=e("68e2"),i=e.n(a);i.a},dae7:function(t,n,e){"use strict";var a=e("575b"),i=e.n(a);i.a},dcd3:function(t,n,e){},ed17:function(t,n,e){}}]);