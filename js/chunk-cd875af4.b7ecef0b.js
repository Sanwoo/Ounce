(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd875af4"],{"0293":function(t,e,n){},"0e8d":function(t,e,n){"use strict";var a=n("0293"),i=n.n(a);i.a},1676:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return l}));n("99af"),n("d3b7"),n("3ca3"),n("ddb0");var a=n("f344");function i(t){return Object(a["a"])("/mv/first?limit=".concat(t),!1)}function o(t){return Object(a["a"])("/personalized/mv")}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(a["a"])("/top/mv?limit=".concat(t,"&area=").concat(e))}function r(t){return Promise.all([Object(a["a"])("mv/detail?mvid=".concat(t)),Object(a["a"])("mv/url?id=".concat(t)),Object(a["a"])("mv/detail/info?mvid=".concat(t))])}function c(t){return Object(a["a"])("related/allvideo?id=".concat(t))}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Object(a["a"])("comment/mv?id=".concat(t,"&limit=").concat(e))}},"2dcf":function(t,e,n){"use strict";var a=n("62df"),i=n.n(a);i.a},3794:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loadFlag?n("div",{ref:"contain",staticClass:"mv-detail"},[n("div",{staticClass:"_player"},[n("transition",{attrs:{"leave-active-class":"animated fadeOut"}},[t.player.canplay?t._e():n("div",{ref:"cover",staticClass:"_player-cover"},[n("img",{attrs:{src:t.mvInfo.cover,alt:""}})])]),n("AdVideo",{directives:[{name:"show",rawName:"v-show",value:t.elseloadFlag,expression:"elseloadFlag"}],attrs:{src:t.mvUrl,title:t.mvInfo.name},on:{canplay:t.videoCanPlay}})],1),n("transition",{attrs:{"leave-active-class":"animated fadeOut"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.elseloadFlag,expression:"elseloadFlag"}],staticClass:"_info"},[n("div",{staticClass:"_info-sname"},[n("p",{ref:"sname"},[t._v(t._s(t.mvInfo.name))])]),n("div",{staticClass:"_info-singer"},[n("span",{ref:"singer"},[t._v(t._s(t.mvInfo.artistName))])]),n("div",{staticClass:"_summary-switch fa",class:[t.summarySwitch?"fa-caret-up":"fa-caret-down"],on:{click:function(e){t.summarySwitch=!t.summarySwitch}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.summarySwitch,expression:"summarySwitch"}],staticClass:"_summary"},[n("ul",[n("li",[t._v(t._s(t.mvInfo.playCount)+"次观看")])]),n("p",[t._v(t._s(t.mvInfo.publishTime)+" 发布")]),n("p",[t._v(t._s(t.mvInfo.desc))])]),n("transition",{attrs:{"leave-active-class":"animated fadeOut"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.elseloadFlag,expression:"elseloadFlag"}],staticClass:"_tools"},t._l(t.tools,(function(e,a){return n("span",{key:a,staticClass:"van-icon",class:e.icon},[t._v(t._s(e.count))])})),0)]),t.elseloadFlag?n("MdRelated"):t._e(),t.elseloadFlag?n("MdComment"):t._e()],1):t._e()},i=[],o=(n("99af"),n("a623"),n("4160"),n("d81d"),n("d3b7"),n("25f0"),n("159b"),n("53ca")),s=n("1676"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ad-video",style:t.fullScreen.css,on:{mouseleave:function(e){t.controlFlag=!1}}},[n("transition",{attrs:{"enter-active-class":"slideInDown","leave-active-class":"slideOutUp"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.controlFlag,expression:"controlFlag"}],staticClass:"ad-video-header"},[n("span",{staticClass:"fa fa-angle-left",on:{click:t.breakHandler}}),n("p",{staticClass:"text-truncate"},[t._v(t._s(t.title))]),n("span",{staticClass:"fa fa-share-alt"})])]),n("transition",{attrs:{"enter-active-class":"fadeIn","leave-active-class":"fadeOut"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.controlFlag,expression:"controlFlag"}],staticClass:"ad-video-footer"},[n("p",[t._v(t._s(t._f("timeFormat")(t.time.current))+"/"+t._s(t._f("timeFormat")(t.time.duration)))]),n("span",{staticClass:"van-icon van-icon-shrink",on:{click:t.fullScreenHandler}})])]),n("transition",{attrs:{"enter-active-class":"fadeIn","leave-active-class":"fadeOut"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.controlFlag,expression:"controlFlag"}],staticClass:"ad-video-play fa",class:[t.playFlag?"fa-pause":"fa-play"],on:{click:t.playHandler}})]),n("div",{ref:"progress",staticClass:"ad-video-progress"},[n("div",{ref:"progresscur",staticClass:"_current",style:{width:t.progress.current+"px"}}),n("span",{staticClass:"_hanlder",style:{transform:"translateX("+t.progress.current+"px) scale("+t.pgsHandlerScale+")"},on:{touchstart:t.pgsTouchStart,touchmove:t.pgsTouchMove,touchend:t.pgsTouchEnd}}),n("div",{staticClass:"_buffer",style:{width:t.progress.buffer+"px"}})]),n("video",{ref:"video",attrs:{src:t.src},on:{click:function(e){t.controlFlag=!t.controlFlag}}})],1)},c=[],l={name:"advideo",props:{src:String,title:String},data:function(){return{controlFlag:!0,playFlag:!1,fullScreen:{flag:!1,css:{}},canPlay:!1,volume:.5,time:{current:"00:00",duration:"00:00"},progress:{current:0,buffer:0,handler:0},pgsTouch:{flag:!1,stratX:0,moveX:0,endX:0},events:{timeupdate:!1,canplay:!1},timer:null}},computed:{pgsHandlerScale:function(){return this.pgsTouch.flag?1.4:1}},watch:{playFlag:function(t){t&&(this.timeUpdater(),this.$store.commit("musicPause"))},controlFlag:{immediate:!0,handler:function(t){t&&this.closeControl()}}},filters:{timeFormat:function(t){if("string"===typeof t)return t;var e=parseInt(t%3600/60);e=e<10?"0"+e:e;var n=parseInt(t%60);return n=n<10?"0"+n:n,e+":"+n}},mounted:function(){this.videoInit()},beforeDestroy:function(){this.eventsRemover()},methods:{videoInit:function(){var t=this.$refs.video;t.addEventListener("canplay",this.canPlayEvent)},canPlayEvent:function(t){var e=t.target;this.canPlay=this.events.canplay=!0,e.volume=this.volume,this.time.duration=e.duration,this.$emit("canplay",this.canPlay)},timeUpdater:function(){if(!this.events.timeupdate){var t=this.$refs.video;t.addEventListener("timeupdate",this.timeUpdateEvent)}},timeUpdateEvent:function(t){var e=t.target,n=e.currentTime,a=e.buffered;this.events.timeupdate=!0,this.time.current=n,this.progressHandler(n,a.end(0))},closeControl:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){return t.controlFlag=!1}),2e3)},progressHandler:function(t,e){var n=this.$refs.progress.clientWidth;this.progress.current=t/this.time.duration*n,this.progress.buffer=e/this.time.duration*n},pgsTouchStart:function(t){this.pgsTouch.flag=!0;var e=t.targetTouches[0],n=e.pageX,a=e.pageY,i=this.fullScreen.flag?a:n;this.pgsTouch.stratX=i},pgsTouchMove:function(t){var e=this.$refs,n=e.video,a=e.progress,i=(e.progresscur,t.targetTouches[0]),o=i.pageX,s=i.pageY,r=this.fullScreen.flag?s:o;this.progress.current=this.pgsTouch.endX+r-this.pgsTouch.stratX,n.currentTime=this.progress.current/a.clientWidth*n.duration},pgsTouchEnd:function(t){this.pgsTouch.flag=!1,this.pgsTouch.endX=this.progress.current},playHandler:function(){var t=this.$refs.video;this.playFlag=!this.playFlag,this.playFlag?t.play():t.pause()},breakHandler:function(){this.fullScreen.flag?this.fullScreenHandler():this.$router.go(-1)},fullScreenHandler:function(){this.$refs.video;var t=(window.innerHeight-window.innerWidth)/2;this.fullScreen.flag=!this.fullScreen.flag,this.fullScreen.css=this.fullScreen.flag?{transform:"rotate(90deg) translate3d(".concat(t,"px, ").concat(t,"px,0)"),width:"100vh",height:"100vw",zIndex:"9999"}:{}},eventsRemover:function(){var t=this.events,e=t.timeupdate,n=t.canplay,a=this.$refs.video;e&&a.removeEventListener("timeupdate",this.canPlayEvent),n&&a.removeEventListener("canplay",this.canPlayEvent)}}},u=l,d=(n("4c3f"),n("2877")),f=Object(d["a"])(u,r,c,!1,null,"7bc9d302",null),m=f.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{"enter-active-class":"animated fadeIn"}},[0!=t.list.length?n("div",{staticClass:"mv-detail_related"},[n("p",[t._v("相关视频")]),n("ul",t._l(t.list,(function(t,e){return n("MvListCard",{key:e,attrs:{info:t}})})),1)]):t._e()])},h=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"mv-list-card",on:{click:t.toMain}},[n("div",{staticClass:"mv-list-card-info"},[n("h4",{class:{skeleton:!t.imgflag,"text-truncate":void 0!=t.info.introduction}},[t._v(" "+t._s(t.info.title)+" ")]),n("p",{class:{skeleton:!t.imgflag}},[t._v(t._s(t.creator))])]),n("div",{staticClass:"mv-list-card-img"},[t.imgflag?n("img",{attrs:{src:t.info.coverUrl+t.rectangleImgSize,alt:""}}):t._e()])])},g=[],y=(n("a15b"),n("a9e3"),{name:"mvlistcard",props:{info:Object},data:function(){return{imgflag:!1}},computed:{creator:function(){return this.info.creator.map((function(t){return t.userName})).join("/")}},mounted:function(){var t=this,e=new Image;e.src=this.info.coverUrl+this.rectangleImgSize,e.onload=function(){return t.imgflag=!0}},methods:{toMain:function(){var t=Number(this.info.vid);isNaN(t)?this.$toast("not num"):this.toMainPage("/home/mvdetail",t)}}}),_=y,b=(n("2dcf"),Object(d["a"])(_,p,g,!1,null,"2a79bbd9",null)),C=b.exports,w={name:"mvdetailrelated",components:{MvListCard:C},data:function(){return{list:[]}},mounted:function(){this.mainRequest()},methods:{mainRequest:function(){var t=this;Object(s["c"])(this.$parent.mvId).then((function(e){t.list=e.data.data}))}}},F=w,O=(n("0e8d"),Object(d["a"])(F,v,h,!1,null,"7f93eeae",null)),j=O.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mv-detail_comment"},[t.hasHotComments?n("div",{staticClass:"_hot"},[n("p",[t._v("精彩评论")]),n("ul",t._l(t.list.hotComments,(function(t,e){return n("CommentlistCard",{key:e,attrs:{info:t}})})),1)]):t._e(),t.hasTopComments?n("div",{staticClass:"_top"},[n("p",[t._v("最新评论")]),n("ul",t._l(t.list.topComments,(function(t,e){return n("CommentlistCard",{key:e,attrs:{info:t}})})),1)]):t._e(),n("div",{staticClass:"_new"},[n("p",[t._v("最新评论")]),n("ul",t._l(t.list.comments,(function(t,e){return n("CommentlistCard",{key:e,attrs:{info:t}})})),1)])])},S=[],k=(n("3ca3"),n("ddb0"),n("a7f5")),I=n("78b8"),T={name:"mvdetailcomment",components:{CommentlistCard:I["a"]},data:function(){return{list:{comments:[],hotComments:[],topComments:[]},loadFlag:!1}},computed:{hasHotComments:function(){return this.list.hotComments.length>0},hasTopComments:function(){return this.list.topComments.length>0}},mounted:function(){this.mainRequest()},methods:{mainRequest:function(){var t=this,e=this.$parent.mvId;Promise.all([Object(s["a"])(e),Object(k["d"])(e,1,4)]).then((function(e){t.list.comments=e[0].data.comments,t.list.hotComments=e[1].data.hotComments,t.list.topComments=e[1].data.topComments,t.loadFlag=!0}))}}},$=T,P=(n("e5ad"),Object(d["a"])($,x,S,!1,null,"c94c96ec",null)),E=P.exports,H={name:"mvdetail",components:{AdVideo:m,MdRelated:j,MdComment:E},data:function(){return{info:[],loadFlag:!1,elseloadFlag:!1,player:{canplay:!1},tools:[{icon:"van-icon-good-job-o",count:0},{icon:"van-icon-add-o",count:0},{icon:"van-icon-chat-o",count:0},{icon:"van-icon-fire-o",count:0}],summarySwitch:!1}},computed:{mvId:function(){return this.$route.query.id},mvInfo:function(){return this.info[0].data.data},mvUrl:function(){return this.info[1].data.data.url},coverPos:function(){return this.$route.query.cover},containPos:function(){return this.$route.query.contain},hasPos:function(){return[this.containPos,this.coverPos].every((function(t){return"object"===Object(o["a"])(t)}))}},watch:{mvId:function(){this.reload()}},mounted:function(){this.mainRequest()},methods:{reload:function(){this.loadFlag=!1,this.$nextTick(this.mainRequest)},mainRequest:function(){var t=this;Object(s["b"])(this.mvId).then((function(e){t.info=e,t.toolsData(e[2]),t.loadFlag=!0,t.$nextTick(t.anmCounter),setTimeout((function(){return t.elseloadFlag=!0}),800)}))},videoCanPlay:function(t){this.player.canplay=t},toolsData:function(t){var e=t.data,n=e.likedCount,a=e.commentCount,i=e.shareCount,o=[n,0,a,i];this.tools=this.tools.map((function(t,e){return t.count=o[e],t}))},anmCounter:function(){var t=this;if(this.hasPos){var e=this.$refs,n=e.cover,a=e.contain,i=[{ref:n,pos:this.coverPos,oldpos:n.getBoundingClientRect()},{ref:a,pos:this.containPos,oldpos:a.getBoundingClientRect()}],o=[{keyframe:[{width:i[0].pos.width+"px"},{width:i[0].oldpos.width+"px"}]},{keyframe:[{width:i[1].pos.width+"px"},{width:i[1].oldpos.width+"px"}]}];i=i.map((function(t,e){return Object.assign(t,o[e])})),i.forEach((function(e){return t.anmHandler(e.ref,e.pos,e.oldpos,e.keyframe||[])}))}},anmHandler:function(t,e,n,a){var i=e.x-n.x,o=e.y-n.y,s=[{transform:"translate3d(".concat(i>0?i:e.right-n.right,"px, ").concat(o,"px,0)"),height:"".concat(e.height,"px")},{transform:"translate3d(0,0,0)",height:"".concat(n.height,"px")}];a.toString()&&(s=s.map((function(t,e){return Object.assign(t,a[e])})));var r={duration:600,easing:"cubic-bezier(0,0,0.32,1)"};t.animate(s,r)}}},M=H,N=(n("8317"),Object(d["a"])(M,a,i,!1,null,"6564e342",null));e["default"]=N.exports},"3e83":function(t,e,n){"use strict";var a=n("d2b8"),i=n.n(a);i.a},"4c3f":function(t,e,n){"use strict";var a=n("9c2f"),i=n.n(a);i.a},"51f5":function(t,e,n){},"53ca":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}},"62df":function(t,e,n){},"78b8":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"comment-list-card"},[n("div",{staticClass:"_avatar",on:{click:function(e){return t.toMainPage("/home/userdetail",t.info.user.userId)}}},[t.info.user.avatarUrl?n("img",{directives:[{name:"img-lazyload",rawName:"v-img-lazyload"}],attrs:{src:t.info.user.avatarUrl+t.squareImgSize,alt:""}}):t._e()]),n("div",{staticClass:"_content"},[n("div",{staticClass:"_content-title"},[n("div",[n("p",[t._v(" "+t._s(t.info.user.nickname)+" "),t.isAuthor?n("a",[t._v("作者")]):t._e()]),n("span",[t._v(t._s(t._f("msToDate")(t.info.time)))])]),n("span",[n("a",[t._v(t._s(t._f("numFormat")(t.info.likedCount)))]),n("i",{staticClass:"van-icon van-icon-good-job-o"})])]),n("pre",{staticClass:"_content-text",domProps:{innerHTML:t._s(t.info.content)}})])])},i=[],o=(n("99af"),n("a9e3"),{name:"commentlistcard",props:{info:Object,pageId:{type:[Number,String],default:0}},filters:{msToDate:function(t){var e=new Date(t);return"".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDay(),"日")}},computed:{isAuthor:function(){return this.pageId==this.info.user.userId}},data:function(){return{}},mounted:function(){}}),s=o,r=(n("3e83"),n("2877")),c=Object(r["a"])(s,a,i,!1,null,"32d6ae98",null);e["a"]=c.exports},8317:function(t,e,n){"use strict";var a=n("a746"),i=n.n(a);i.a},"9c2f":function(t,e,n){},a623:function(t,e,n){"use strict";var a=n("23e7"),i=n("b727").every,o=n("a640"),s=n("ae40"),r=o("every"),c=s("every");a({target:"Array",proto:!0,forced:!r||!c},{every:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},a746:function(t,e,n){},a7f5:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"g",(function(){return s})),n.d(e,"f",(function(){return r})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"e",(function(){return d})),n.d(e,"h",(function(){return f}));n("99af"),n("c740"),n("4160"),n("d81d"),n("d3b7"),n("25f0"),n("159b");var a=n("f344"),i=n("d73f");function o(){return Object(a["a"])("banner?type=1")}function s(){return Object(a["a"])("personalized/djprogram")}function r(t){return Object(a["a"])("top/mv?limit=".concat(t))}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(a["a"])("comment/hot?id=".concat(t,"&type=").concat(e,"&limit=").concat(n,"&offset=").concat(i))}function l(){return Object(a["a"])("search/default")}function u(){return Object(a["a"])("search/hot/detail")}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:40,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return 1===e?new Promise((function(s,r){Object(a["a"])("search?keywords=".concat(t,"&limit=").concat(n,"&type=").concat(e,"&offset=").concat(o)).then((function(t){var e=t.data.result.songs,n=t.data.result.songCount,a=e.map((function(t){return t.id}));Object(i["e"])(a.toString()).then((function(t){t.data.data.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));e[n].url=t.url}))}));var o={songs:e,songCount:n};s(o)})).catch((function(t){return r(t)}))})):Object(a["a"])("search?keywords=".concat(t,"&limit=").concat(n,"&type=").concat(e,"&offset=").concat(o))}function f(t){return Object(a["a"])("search/suggest?keywords= ".concat(t,"&type=mobile"))}},d2b8:function(t,e,n){},e5ad:function(t,e,n){"use strict";var a=n("51f5"),i=n.n(a);i.a}}]);