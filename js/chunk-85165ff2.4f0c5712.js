(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85165ff2"],{"1da1":function(t,n,e){"use strict";e.d(n,"a",(function(){return o}));e("d3b7"),e("e6cf");function r(t,n,e,r,o,a,i){try{var c=t[a](i),s=c.value}catch(u){return void e(u)}c.done?n(s):Promise.resolve(s).then(r,o)}function o(t){return function(){var n=this,e=arguments;return new Promise((function(o,a){var i=t.apply(n,e);function c(t){r(i,o,a,c,s,"next",t)}function s(t){r(i,o,a,c,s,"throw",t)}c(void 0)}))}}},"2b50":function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("BotLoadRequest",{staticClass:"song-comment",attrs:{offset:"",perpage:14,request:t.bLRConfig.fn,resword:t.bLRConfig.resword},scopedSlots:t._u([{key:"contain",fn:function(n){var r=n.curdata;return[e("ul",{directives:[{name:"loading",rawName:"v-loading",value:!t.flags.load,expression:"!flags.load"}]},t._l(r,(function(t){return e("CommentlistCard",{key:t.id,attrs:{info:t}})})),1)]}}])},[e("BreakHeader",{staticClass:"song-comment__header",attrs:{fixed:"",title:t.pageTitle,color:"#000",background:"#fff"}}),e("div",{staticClass:"song-comment__banner",on:{click:function(n){return n.stopPropagation(),t.toPlay(n)}}},[e("div",{staticClass:"song-comment__banner-cover"},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.hasSongs,expression:"hasSongs"}],attrs:{src:t.songCover,alt:""}})]),e("div",{staticClass:"song-comment__banner-text"},[e("p",[t._v(t._s(t.songTitle))]),e("span",[t._v(t._s(t.songArs))])]),e("van-icon",{attrs:{name:"arrow"}})],1),e("div",{staticClass:"song-comment__nav"},[e("span",[t._v("评论区")]),e("ul",t._l(t.nav,(function(n,r){return e("li",{key:r,class:{_active:r===t.comment.tips.index},on:{click:function(n){t.comment.tips.index=r}}},[t._v(t._s(n))])})),0)])],1)},o=[],a=(e("99af"),e("a15b"),e("d81d"),e("b0c0"),e("d3b7"),e("5377"),e("96cf"),e("1da1")),i=e("d73f"),c=e("a7f5"),s=e("78b8"),u={name:"SongComment",components:{CommentlistCard:s["a"]},data:function(){return{comment:{total:0,tips:{list:["hot","new"],index:0}},nav:["最热","最新"],songs:{},flags:{load:!1}}},computed:{pageId:function(){return this.$route.query.id},pageTitle:function(){return"评论 (".concat(this.comment.total,")")},hasSongs:function(){return"undefined"!==typeof this.songs.name},songCover:function(){if(!this.hasSongs)return"";var t=this.songs.al;return"".concat(t.picUrl,"?param=300y300")},songTitle:function(){if(!this.hasSongs)return"";var t=this.songs,n=t.alia,e=t.name;return"".concat(e,"（").concat(n[0],"）")},songArs:function(){if(!this.hasSongs)return"";var t=this.songs.ar;return t.map((function(t){return t.name})).join("/")},bLRConfig:function(){var t=this.comment.tips,n=t.list,e=t.index,r=["hotComments","comments"];return{fn:this["".concat(n[e],"Comment")],resword:r[e]}}},mounted:function(){this.mainRequest()},methods:{mainRequest:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(i["c"])(t.pageId).then((function(n){t.songs=n.data.songs[0]}));case 2:return n.next=4,Object(i["b"])(t.pageId).then((function(n){t.comment.total=n.data.total}));case 4:t.flags.load=!0;case 5:case"end":return n.stop()}}),n)})))()},newComment:function(){for(var t=this,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return new Promise((function(n,r){i["b"].apply(void 0,[t.pageId].concat(e)).then((function(t){var e=t.data.comments;n({data:{comments:e}})})).catch(r)}))},hotComment:function(){for(var t=this,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return new Promise((function(n,r){c["d"].apply(void 0,[t.pageId,0].concat(e)).then((function(t){var e=t.data.hotComments;n({data:{hotComments:e}})})).catch(r)}))},toPlay:function(){}}},f=u,l=(e("b490"),e("2877")),h=Object(l["a"])(f,r,o,!1,null,"46cd60e4",null);n["default"]=h.exports},"3e83":function(t,n,e){"use strict";var r=e("d2b8"),o=e.n(r);o.a},5377:function(t,n,e){var r=e("83ab"),o=e("9bf2"),a=e("ad6d"),i=e("9f7f").UNSUPPORTED_Y;r&&("g"!=/./g.flags||i)&&o.f(RegExp.prototype,"flags",{configurable:!0,get:a})},"78b8":function(t,n,e){"use strict";var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("li",{staticClass:"comment-list-card"},[e("div",{staticClass:"_avatar",on:{click:function(n){return t.toMainPage("/home/userdetail",t.info.user.userId)}}},[t.info.user.avatarUrl?e("img",{directives:[{name:"img-lazyload",rawName:"v-img-lazyload"}],attrs:{src:t.info.user.avatarUrl+t.squareImgSize,alt:""}}):t._e()]),e("div",{staticClass:"_content"},[e("div",{staticClass:"_content-title"},[e("div",[e("p",[t._v(" "+t._s(t.info.user.nickname)+" "),t.isAuthor?e("a",[t._v("作者")]):t._e()]),e("span",[t._v(t._s(t._f("msToDate")(t.info.time)))])]),e("span",[e("a",[t._v(t._s(t._f("numFormat")(t.info.likedCount)))]),e("i",{staticClass:"van-icon van-icon-good-job-o"})])]),e("pre",{staticClass:"_content-text",domProps:{innerHTML:t._s(t.info.content)}})])])},o=[],a=(e("99af"),e("a9e3"),{name:"commentlistcard",props:{info:Object,pageId:{type:[Number,String],default:0}},filters:{msToDate:function(t){var n=new Date(t);return"".concat(n.getFullYear(),"年").concat(n.getMonth()+1,"月").concat(n.getDay(),"日")}},computed:{isAuthor:function(){return this.pageId==this.info.user.userId}},data:function(){return{}},mounted:function(){}}),i=a,c=(e("3e83"),e("2877")),s=Object(c["a"])(i,r,o,!1,null,"32d6ae98",null);n["a"]=s.exports},"96cf":function(t,n,e){var r=function(t){"use strict";var n,e=Object.prototype,r=e.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,n,e,r){var o=n&&n.prototype instanceof p?n:p,a=Object.create(o.prototype),i=new k(r||[]);return a._invoke=C(t,e,i),a}function u(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(r){return{type:"throw",arg:r}}}t.wrap=s;var f="suspendedStart",l="suspendedYield",h="executing",d="completed",m={};function p(){}function v(){}function g(){}var y={};y[a]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(S([])));b&&b!==e&&r.call(b,a)&&(y=b);var _=g.prototype=p.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(n){t[n]=function(t){return this._invoke(n,t)}}))}function L(t,n){function e(o,a,i,c){var s=u(t[o],t,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"===typeof l&&r.call(l,"__await")?n.resolve(l.__await).then((function(t){e("next",t,i,c)}),(function(t){e("throw",t,i,c)})):n.resolve(l).then((function(t){f.value=t,i(f)}),(function(t){return e("throw",t,i,c)}))}c(s.arg)}var o;function a(t,r){function a(){return new n((function(n,o){e(t,r,n,o)}))}return o=o?o.then(a,a):a()}this._invoke=a}function C(t,n,e){var r=f;return function(o,a){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw a;return P()}e.method=o,e.arg=a;while(1){var i=e.delegate;if(i){var c=j(i,e);if(c){if(c===m)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(r===f)throw r=d,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r=h;var s=u(t,n,e);if("normal"===s.type){if(r=e.done?d:l,s.arg===m)continue;return{value:s.arg,done:e.done}}"throw"===s.type&&(r=d,e.method="throw",e.arg=s.arg)}}}function j(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=n,j(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,m;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function O(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function E(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){while(++o<t.length)if(r.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:n,done:!0}}return v.prototype=_.constructor=g,g.constructor=v,g[c]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var n="function"===typeof t&&t.constructor;return!!n&&(n===v||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},x(L.prototype),L.prototype[i]=function(){return this},t.AsyncIterator=L,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new L(s(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(_),_[c]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){while(n.length){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(r,o){return c.type="throw",c.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),m},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),E(e),m}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;E(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),m}},t}(t.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},a7f5:function(t,n,e){"use strict";e.d(n,"c",(function(){return a})),e.d(n,"g",(function(){return i})),e.d(n,"f",(function(){return c})),e.d(n,"d",(function(){return s})),e.d(n,"a",(function(){return u})),e.d(n,"b",(function(){return f})),e.d(n,"e",(function(){return l})),e.d(n,"h",(function(){return h}));e("99af"),e("c740"),e("4160"),e("d81d"),e("d3b7"),e("25f0"),e("159b");var r=e("f344"),o=e("d73f");function a(){return Object(r["a"])("banner?type=1")}function i(){return Object(r["a"])("personalized/djprogram")}function c(t){return Object(r["a"])("top/mv?limit=".concat(t))}function s(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(r["a"])("comment/hot?id=".concat(t,"&type=").concat(n,"&limit=").concat(e,"&offset=").concat(o))}function u(){return Object(r["a"])("search/default")}function f(){return Object(r["a"])("search/hot/detail")}function l(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:40,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return 1===n?new Promise((function(i,c){Object(r["a"])("search?keywords=".concat(t,"&limit=").concat(e,"&type=").concat(n,"&offset=").concat(a)).then((function(t){var n=t.data.result.songs,e=t.data.result.songCount,r=n.map((function(t){return t.id}));Object(o["e"])(r.toString()).then((function(t){t.data.data.forEach((function(t){var e=n.findIndex((function(n){return n.id===t.id}));n[e].url=t.url}))}));var a={songs:n,songCount:e};i(a)})).catch((function(t){return c(t)}))})):Object(r["a"])("search?keywords=".concat(t,"&limit=").concat(e,"&type=").concat(n,"&offset=").concat(a))}function h(t){return Object(r["a"])("search/suggest?keywords= ".concat(t,"&type=mobile"))}},b490:function(t,n,e){"use strict";var r=e("ea99"),o=e.n(r);o.a},d2b8:function(t,n,e){},ea99:function(t,n,e){}}]);